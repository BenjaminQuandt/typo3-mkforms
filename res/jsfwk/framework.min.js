/**
 * NOTE: THIS IS MINIFIED VERSION OF FORMIDABLE JS
 * For regular set typoscript: config.tx_mkforms.minify.enabled=0
 */
if(!console){var console={log:function(a){},dir:function(a){}}}var Formidable={initialize:function(a){MKWrapper.extend(this,a);this.Browser.getBrowserInfo()},SEP:'__',SUBMIT_FULL:"AMEOSFORMIDABLE_EVENT_SUBMIT_FULL",SUBMIT_REFRESH:"AMEOSFORMIDABLE_EVENT_SUBMIT_REFRESH",SUBMIT_TEST:"AMEOSFORMIDABLE_EVENT_SUBMIT_TEST",SUBMIT_DRAFT:"AMEOSFORMIDABLE_EVENT_SUBMIT_DRAFT",SUBMIT_CLEAR:"AMEOSFORMIDABLE_EVENT_SUBMIT_CLEAR",SUBMIT_SEARCH:"AMEOSFORMIDABLE_EVENT_SUBMIT_SEARCH",Classes:{},CodeBehind:{},Context:{Forms:{},Objects:{}},Lister:{Pager:{goTo:function(a,b){var c=Formidable.f(a);var d=c.domNode();d[c.Misc.HiddenIds.Lister.page].value=b;c.submitRefresh()}},Sort:{by:function(a,b,c){var d=Formidable.f(c);var e=d.domNode();e[d.Misc.HiddenIds.Lister.sortField].value=a;e[d.Misc.HiddenIds.Lister.sortDirection].value=b;e.action=d.Misc.Urls.Lister.sortAction;d.submitRefresh()}}},f:function(a){return this.Context.Forms[a]},o:function(a){return this.Context.Objects[a]},executeInlineJs:function(b){$H(b).each(function(a){Formidable.globalEval(unescape(a))}.bind(this))},loadedScripts:[],addScript:function(a){if(!this.isScriptLoaded(a))this.loadedScripts.push(a)},isScriptLoaded:function(a){return(this.indexOf(this.loadedScripts,a)>-1)},indexOf:function(a,b){i=0;var c=a.length;for(;i<c;i++)if(a[i]===b)return i;return-1},debugMessage:function(a){a=a.replace(/<br \/>/g,"\n");a=a.replace(/<b>/g,"");a=a.replace(/<\/b>/g,"");a=a.replace(/^\s+|\s+$/g,"");alert(a)},Browser:{name:"",version:"",os:"",total:"",getBrowserInfo:function(){this.name=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.os=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var i=0;i<a.length;i++){var b=a[i].string;var c=a[i].prop;this.versionSearchString=a[i].versionSearch||a[i].identity;if(b){if(b.indexOf(a[i].subString)!=-1)return a[i].identity}else if(c)return a[i].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(b==-1)return;return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"omniweb"},{string:navigator.vendor,subString:"Apple",identity:"safari",versionSearch:"Version"},{prop:window.opera,identity:"opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"icab"},{string:navigator.vendor,subString:"KDE",identity:"konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.vendor,subString:"Camino",identity:"camino"},{string:navigator.userAgent,subString:"Netscape",identity:"netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"internet explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"windows"},{string:navigator.platform,subString:"Mac",identity:"mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"linux"}]},Position:{putCenter:function(a,b){a=MKWrapper.$(a);var c=MKWrapper.getDimensions(a);var d=this.windowDimensions();var e=this.scrollOffset();if(!b||b=="h"){MKWrapper.setStyle(a,{left:(d.width/2)+e.width-(c.width/2)+'px'})}if(!b||b=="v"){MKWrapper.setStyle(a,{top:(d.height/2)+e.height-(c.height/2)+'px'})}},putCenterVertical:function(a){this.putCenter(a,"v")},putCenterHorizontal:function(a){this.putCenter(a,"h")},putFixedToWindowVertical:function(a,b){a=MKWrapper.$(a);var c=MKWrapper.getDimensions(a);var d=this.windowDimensions();var e=this.scrollOffset();MKWrapper.setStyle(a,{top:(e.height+parseInt(b))+'px'})},fullScreen:function(a){a=MKWrapper.$(a);var b=this.windowDimensions();var c=this.scrollOffset();MKWrapper.setStyle(a,{height:c.height+b.height+'px'})},windowDimensions:function(){var x,y;if(self.innerHeight){x=self.innerWidth;y=self.innerHeight}else if(document.documentElement&&document.documentElement.clientHeight){x=document.documentElement.clientWidth;y=document.documentElement.clientHeight}else if(document.body){x=document.body.clientWidth;y=document.body.clientHeight}if(!x)x=0;if(!y)y=0;return{width:x,"height":y}},scrollOffset:function(){var x,y;if(self.pageYOffset){x=self.pageXOffset;y=self.pageYOffset}else if(document.documentElement&&document.documentElement.scrollTop){x=document.documentElement.scrollLeft;y=document.documentElement.scrollTop}else if(document.body){x=document.body.scrollLeft;y=document.body.scrollTop}if(!x)x=0;if(!y)y=0;return{width:x,height:y}}},getLocalAnchor:function(){var a=MKWrapper.$A(window.location.href.replace(window.location.href.split('#')[0],'').split('/'));a=a[a.length-1];return a.replace(/#/,'')},log:function(){console.log(arguments)},formatSize:function(a){iSizeInByte=parseInt(a);if(a>900){if(a>900000){return parseInt(a/(1024*1024))+' MB'}else{return parseInt(a/(1024))+' KB'}}return a+' B'},globalEval:function(a){if(Formidable.Browser.name=="internet explorer"){window.execScript(a)}else if(Formidable.Browser.name=="safari"){var b=document.createElement("script");b.type="text/javascript";b.defer=false;b.text=a;var c=document.getElementsByTagName("head");if(c.length){b=c.item(0).appendChild(b)}else{var d=document.createElement("head");d=document.documentElement.appendChild(d);b=d.appendChild(b)}}else{window.eval(a)}},includeStylesheet:function(a){if(document.createStyleSheet){document.createStyleSheet(a)}else{var b="@import url('"+a+"');";var c=document.createElement('link');c.rel='stylesheet';c.href='data:text/css,'+escape(b);document.getElementsByTagName("head")[0].appendChild(c)}},obj2Array:function(a){var b=[];for(var c in a){b.push({key:c,value:a[c]})}return b},objEach:function(a,b){for(var c in a){b(c,a[c])}},objValues:function(a){var b=[];for(var c in a)b.push(a[c]);return b}};Formidable.Classes.FormBaseClass=Base.extend({domNode:function(){return document.forms[this.sFormId]},aParamsStack:MKWrapper.$A(),aContextStack:MKWrapper.$A(),aAddPostVars:[],ajaxCache:{},ViewState:[],Objects:{},aDynHeadersLoaded:[],oLoading:null,oDebugDiv:false,currentTriggeredArguments:false,Services:{},AjaxRequestsStack:MKWrapper.$H(),constructor:function(a){MKWrapper.extend(this,a);this.initLoader()},getParams:function(){var a=MKWrapper.$A(this.aParamsStack);return a[a.length-1]},getContext:function(){var a=MKWrapper.$A(this.aContextStack);return a[a.length-1]},getSender:function(){return this.getContext().sender},o:function(a){if(a=="tx_ameosformidable"){return Formidable}else if(Formidable.f(a)){return Formidable.f(a)}else if(this.Objects[a]){return this.Objects[a]}else if(this.Objects[this.sFormId+Formidable.SEP+a]){return this.Objects[this.sFormId+Formidable.SEP+a]}else if(MKWrapper.$(a)){oObj=MKWrapper.$(a);if(MKWrapper.hasClass(oObj,"readonly")){return new Formidable.Classes.RdtBaseClass({"formid":this.sFormId,"id":a})}return oObj}return null},rdt:function(a){return this.o(a)},attachEvent:function(a,b,c){var d=this.o(a);if(d&&typeof(d)!='undefined'){if(typeof(d.domNode)!='undefined'){d.attachEvent(b,c)}}},handleValidationErrors:function(a,b){b=(b!='1')?this.sFormId+'__'+b:false;if(MKWrapper.handleValidationErrors){MKWrapper.handleValidationErrors(a,this,b);return}var c="Es sind folgende Fehler aufgetreten:\n";for(var d in a){c+='- '+a[d]+"\n"}alert(c)},updateViewState:function(a){this.ViewState.push(a)},executeServerEvent:function(a,b,c,d,e){var f=false;if(e!=false){f=confirm(unescape(e))}else{f=true}if(f){MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SERVEREVENT").value=a;if(c!=false){MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SERVEREVENT_PARAMS").value=c;MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SERVEREVENT_HASH").value=d}if(b){this.doSubmit(b,true)}else{this.domNode().submit()}}},_clientData:function(a){if(a){if(typeof a=="string"){if(a.slice(0,12)=="clientData::"){sObjectId=a.slice(12);oObj=this.o(sObjectId);if(oObj&&typeof oObj.getValue=="function"){a=oObj.getValue()}}}else if(typeof a=="object"){for(var i in a){a[i]=this._clientData(a[i])}}}return a},executeClientEvent:function(c,d,e,f,g,h){if(h!=false){bThrow=confirm(unescape(h))}else{bThrow=true}if(bThrow){if(e.tasks.object){this.executeClientTask(e.tasks,d,f,c,g)}else{var i=this;Formidable.objEach(e.tasks,MKWrapper.bind(function(a,b){i.executeClientTask(b,d,f,c,g)},this))}if(d){this.updateViewState(e)}}},executeClientTask:function(a,b,c,d,e){if(a.formid){var f=Formidable.f(a.formid)}else{var f=this}var g=f.o(a.object);var h=f.o(d);if(g){if(g[a.method]){oData=f._clientData(a.data);var i=h.getParamsForMajix({},c,{},{},e);var i=MKWrapper.extend(i,a.databag.params);oContext=a.databag.context||{};oContext.sender=h;oContext.event=e[0];if(oContext.event){oContext.event[0]=oContext.event}this.aContextStack.push(oContext);this.aParamsStack.push(i);g[a.method](oData);this.aParamsStack.pop();this.aContextStack.pop()}else{console.log("executeClientEvent: single task: No method named "+a.method+" on "+a.object)}}else{console.log("executeClientEvent: single task: No object named "+a.object)}},executeAjaxEvent:function(f,g,h,j,k,l,m,n,p,q,r){var t=this;bThrow=(r!=false)?confirm(unescape(r)):true;if(!bThrow)return;if(m&&typeof(tinymce)=='object'){if(typeof(m)=='string'&&m.toLowerCase()==='true'){var s=tinyMCE.EditorManager.get()}else{var s=new Array();MKWrapper.each(tinyMCE.explode(m,','),function(o,i){if(t.o(o)){s.push(tinyMCE.EditorManager.get(t.o(o).config.id))}})}MKWrapper.each(s,function(o,i){try{o.save()}catch(e){}})}var u={};if(n){for(var v in n){var w=n[v],isRowInput=w.slice(0,10)=="rowInput::",sReturnName=w,sId=w;if(isRowInput){aInfo=w.split("::");sReturnName=aInfo[1];sId=aInfo[2]}if(w.indexOf('::')&&!isRowInput){aInfo=w.split("::");v=aInfo[0];w=aInfo[1];u[v]=w}else if((oElement=this.o(sId))){u[sReturnName]=oElement.getParamsForMajix(oElement.getValue(),f,n,p,q)}else if(isRowInput){}else if((oElement=MKWrapper.$(this.rdtIdByName(w)))){u[sReturnName]=MKWrapper.$F(oElement)}else{u[v]=w}}}if(p){for(var w in p){u[w]=p[w]}}var x=this.o(g);if(x.getMajixThrowerIdentity!=undefined){var y=x.getMajixThrowerIdentity(g);u=x.getParamsForMajix(u,f,n,p,q)}else{var y=g}var z=JSONstring.make(u,true);var A=false;if(this.currentTriggeredArguments){var A=JSONstring.make(this.currentTriggeredArguments,true)}var B=this.Misc.Urls.Ajax.event+"&formid="+this.sFormId+"&eventid="+h+"&safelock="+j+"&value="+escape(z)+"&thrower="+escape(y)+"&trueargs="+escape(A);if(!k){B+="&random="+escape(Math.random())}if(k&&this.ajaxCache[B]!=undefined){this.executeAjaxResponse(this.ajaxCache[B],l,bFromCache=true)}else{this.displayLoader();MKWrapper.ajaxCall(this.Misc.Urls.Ajax.event,{method:'post',asynchronous:true,evalJS:true,parameters:{'formid':this.sFormId,'eventid':h,'safelock':j,'value':z,'thrower':y,'trueargs':A},onSuccess:function(c,d){c=MKWrapper.strStrip(c);d=typeof d!='undefined'?d:this;var e=true;if(!MKWrapper.isJSON(c)){if(c!="null"){Formidable.debugMessage(c)}}else{eval("var oJson="+c+";");if(k){d.ajaxCache[B]=oJson}d.executeAjaxResponse(oJson,l,bFromCache=false);if(typeof(oJson.tasks.object)!='undefined'&&oJson.tasks.object){if(oJson.tasks.method=="triggerSubmit"||oJson.tasks.method=="sendToPage")e=false}else{MKWrapper.each(Formidable.objValues(oJson.tasks),function(a,b){if(a.method=="triggerSubmit"||a.method=="sendToPage")e=false})}}if(e)d.removeLoader();else window.setTimeout(function(){d.removeLoader()},10000)},onFailure:function(){console.log("Ajax request failed")}},this)}},executeViewState:function(b){$A(b).each(function(a){this.executeAjaxResponse(a,true,false)}.bind(this))},executeAjaxResponse:function(c,d,f){this.executeAjaxAttachHeaders(c.attachheaders);try{this.executeAjaxInit(c.init)}catch(e){console.log("AJAX INIT - Exception:",e)}if(c.tasks.object){this.executeAjaxTask(c.tasks)}else{Formidable.objEach(c.tasks,MKWrapper.bind(function(a,b){this.executeAjaxTask(b)},this))}try{this.executeAjaxAttachEvents(c.attachevents)}catch(e){console.log("AJAX ATTACH EVENTS - Exception:",e)}try{this.executeAjaxInit(c.postinit)}catch(e){console.log("AJAX POST-INIT - Exception:",e)}if(d){this.updateViewState(c)}},executeAjaxInit:function(a){for(var b in a){Formidable.globalEval(a[b])}},executeAjaxAttachEvents:function(a){var b=this;for(var c in a){Formidable.globalEval(a[c])}},executeAjaxAttachHeaders:function(b){for(var c in b){var d=b[c].replace(/%3C/g,'<').replace(/%3E/g,'>');if(Formidable.indexOf(this.aDynHeadersLoaded,d)>-1){console.log("AJAX attach header avoided:"+d)}else if(Formidable.isScriptLoaded(c)){console.log("AJAX2 attach header avoided:"+c)}else{var e=d.match(/src=["|'].+["|']/g);if(e&&e.length>0){for(var i=0;i<e.length;i++){var f=e[i].substr(5,e[i].length-6);MKWrapper.loadScript(f,function(a){a=typeof a!='undefined'?a:this;a.aDynHeadersLoaded.push(d)},this)}}e=d.match(/<link rel=["|']stylesheet["|'] type=["|']text\/css["|'].+href=["|'](.+)["|'] \/>/);if(e&&e.length>0){f=e[1];Formidable.includeStylesheet(f)}}}},executeAjaxTask:function(a){if(a.formid){var b=Formidable.f(a.formid);if(!b){console.log("executeClientEvent: single task: on formid "+a.formid+": No method named "+a.method+" on "+a.object)}}else{var b=this}var c=b.o(a.object);if(c){if(c[a.method]){oContext=a.databag.context||{};aParams=a.databag.params||{};this.aContextStack.push(oContext);this.aParamsStack.push(aParams);c[a.method](a.data);this.aParamsStack.pop();this.aContextStack.pop()}else{console.log("executeAjaxResponse: single task: No method named "+a.method+" on "+a.object)}}else{console.log("executeAjaxResponse: single task: No object named "+a.object)}},initPersistedData:function(a){for(var b in a){if(this.o(b)){try{this.o(b).rebirth(a[b])}catch(e){}}}},rdtIdByName:function(a){return this.sFormId+"_"+a},submitClear:function(a){this.doSubmit(Formidable.SUBMIT_CLEAR,false,a||false)},submitSearch:function(a){this.doSubmit(Formidable.SUBMIT_SEARCH,false,a||false)},submitDraft:function(a){this.doSubmit(Formidable.SUBMIT_DRAFT,false,a||false)},submitTest:function(a){this.doSubmit(Formidable.SUBMIT_TEST,false,a||false)},submitRefresh:function(a){this.doSubmit(Formidable.SUBMIT_REFRESH,false,a||false)},submitFull:function(a){this.doSubmit(Formidable.SUBMIT_FULL,false,a||false)},submitOnEnter:function(a,b,e){var c;if(window.event){c=window.event.keyCode}else if(e){c=e.which}else{return true}if(c==13){this.doSubmit(Formidable.SUBMIT_FULL);return false}else{return true}},cleanSysFields:function(a){MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SERVEREVENT").value="";MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SERVEREVENT_PARAMS").value="";MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SERVEREVENT_HASH").value="";MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_ADDPOSTVARS").value="";if(a){if(MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_ENTRYID")){MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_ENTRYID").value=""}MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_VIEWSTATE").value="";MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SUBMITTED").value="";MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SUBMITTER").value=""}},doSubmit:function(a,b,c){if(!a){a=''}if(!b){this.cleanSysFields()}if(c||(this.getContext()&&(c=this.getSender()))){var d={};if(c.isNaturalSubmitter()){d[c.config.namewithoutformid]=a;this.addFormData(d)}MKWrapper.$(this.sFormId+'_AMEOSFORMIDABLE_SUBMITTER').value=c.config.idwithoutformid}MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_ADDPOSTVARS").value=JSONstring.make(this.aAddPostVars,true);MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SUBMITTED").value=a;if(this.Misc.disableButtonsOnSubmit){this.disableButtons()}if(this.Misc.displayLoaderOnSubmit){this.displayLoader()}this.domNode().submit()},disableButtons:function(){MKWrapper.each(MKWrapper.findChilds(MKWrapper.$(this.sFormId),'input[type=submit]'),function(o,i){MKWrapper.$(o).disabled=true});MKWrapper.each(MKWrapper.findChilds(MKWrapper.$(this.sFormId),'input[type=button]'),function(o,i){MKWrapper.$(o).disabled=true})},enableButtons:function(){MKWrapper.each(MKWrapper.findChilds(MKWrapper.$(this.sFormId),'input[type=submit]'),function(o,i){MKWrapper.$(o).disabled=false});MKWrapper.each(MKWrapper.findChilds(MKWrapper.$(this.sFormId),'input[type=button]'),function(o,i){MKWrapper.$(o).disabled=false})},doNothing:function(a){return true},scrollTo:function(a){var b=this.o(a);if(b){if(typeof b.domNode=='undefined'){Element.scrollTo(b)}else{Element.scrollTo(b.domNode())}}},sendToPage:function(a){this.displayLoader();if(!this.isAbsUrl(a)){a=this.getBaseUrl()+a}document.location.href=a},isAbsUrl:function(a){return a.substr(0,window.location.protocol.length)===window.location.protocol},getBaseUrl:function(){var a='';if(document.getElementsByTagName){var b=document.getElementsByTagName('base');if(b.length){a=b[0].href}}if(a==''){a=window.location.protocol+'//'+window.location.host}return a},openPopup:function(a){if(typeof a["url"]!='undefined'){var b=[];var c=(typeof a['name']!='undefined')?a['name']:'noname';if(typeof a['menubar']!='undefined'){b.push((a['menubar']==true)?'menubar=yes':'menubar=no')}if(typeof a["status"]!='undefined'){if(a["status"]==true){b.push("status=yes")}else{b.push("status=no")}}if(typeof a["scrollbars"]!='undefined'){if(a["scrollbars"]==true){b.push("scrollbars=yes")}else{b.push("scrollbars=no")}}if(typeof a["resizable"]!='undefined'){if(a["resizable"]==true){b.push("resizable=yes")}else{b.push("resizable=no")}}if(typeof a["width"]!='undefined'){b.push("width="+a["width"])}if(typeof a["height"]!='undefined'){b.push("height="+a["height"])}window.open(a["url"],c,b.join(", "))}else{window.open(a)}},toggleDebug:function(){var a=$(this.sFormId+'_debugzone');if(a&&a.style.display=='none'){a.style.display='block';aDivs=document.getElementsByClassName("ameosformidable_debugcontainer_void");for(sKey in aDivs){aDivs[sKey].className="ameosformidable_debugcontainer"}aDivs=document.getElementsByClassName("ameosformidable_debughandler_void");for(sKey in aDivs){aDivs[sKey].className="ameosformidable_debughandler"}}else{a.style.display='none';aDivs=document.getElementsByClassName("ameosformidable_debugcontainer");for(sKey in aDivs){aDivs[sKey].className="ameosformidable_debugcontainer_void"}aDivs=document.getElementsByClassName("ameosformidable_debughandler");for(sKey in aDivs){aDivs[sKey].className="ameosformidable_debughandler_void"}}},toggleBacktrace:function(a){var b=$(this.sFormId+'_formidable_call'+a+'_backtrace');if(b&&b.style.display=='none'){b.style.display='block'}else{b.style.display='none'}},debug:function(a){if(this.oDebugDiv==false){this.oDebugDiv=$div({id:this.sFormId+"-majixdebug",style:"padding: 5px; border: 2px solid red; background-color: white; height: 500px; overflow: scroll;"});this.domNode().appendChild(this.oDebugDiv)}var b=new Date();var c=b.getHours()+":"+b.getMinutes()+":"+b.getSeconds();this.oDebugDiv.innerHTML="<div style='font-weight: bold; font-size: 20px;'>DEBUG - "+c+"</div>"+a+"<hr style='margin: 20px; padding:0; border: 0; border-top:2px solid black; color: black; '/>"+this.oDebugDiv.innerHTML;this.scrollTo(this.oDebugDiv.id);this.oDebugDiv.scrollTop=0},requestNewI18n:function(a){this.cleanSysFields(true);this.addPostVar({"action":"requestNewI18n","params":a});this.submitClear()},requestEdition:function(a){this.cleanSysFields(true);this.addPostVar({"action":"requestEdition","params":a});this.submitClear()},execOnNextPage:function(a){this.addPostVar({"action":"execOnNextPage","params":a})},addFormData:function(a){this.addPostVar({"action":"formData","params":a})},addPostVar:function(a){this.aAddPostVars.push(a)},initLoader:function(){var a=MKWrapper.$tag('div',{style:"position: fixed; left: 50%; top: 50%; margin: 0; padding: 0; z-index: 999999999;",id:"tx_mkforms_spinner"});var b=MKWrapper.$tag('div',{style:"position: fixed; left: 0; top: 0; margin: 0; padding: 0; z-index: 99999999; opacity:0.6; filter: progid:DXImageTransform.Microsoft.Alpha(opacity=60)",id:"tx_mkforms_spinner_overlay"});var c=MKWrapper.$tag('div',{style:"position: fixed; z-index: 999999999;",id:"tx_mkforms_spinner_wrap"});var d=MKWrapper.$tag('img',{src:Formidable.path+"res/images/loading.gif"});a.appendChild(d);c.appendChild(b);c.appendChild(a);Formidable.Position.fullScreen(b);Formidable.Position.putCenter(a);this.oLoading=c},displayLoader:function(){if(this.oLoading==null)this.initLoader();if(Formidable.Browser.name=="internet explorer"){this.oLoading.style.position="absolute";Formidable.Position.putCenter(this.oLoading)}if(this.Misc.MajixSpinner.left){posLeft=this.Misc.MajixSpinner.left;if((parseInt(posLeft)+"")==posLeft){posLeft+="px"}this.oLoading.style.left=posLeft}try{document.body.appendChild(this.oLoading)}catch(e){}},removeLoader:function(){try{MKWrapper.domRemove(this.oLoading);this.oLoading=null}catch(e){}},execJs:function(a){eval(a)},executeCbMethod:function(a){var b=a['cb']['class'];aParams={obj:Formidable.CodeBehind[b],params:a.params[0]};Formidable.CodeBehind[b][a.method](aParams,this)},filterKeypress:function(a,b){iKeyCode=a.keyCode;bOk=true;var c=a.charCode?a.charCode:a.keyCode;var d=String.fromCharCode(c);if(([8,9,16,17,18,20,27,37,39,40,46,144].indexOf(iKeyCode)==-1)&&!d.match(b)){bOk=false;Event.stop(a)}else if(iKeyCode==39||iKeyCode==40){if(!Prototype.Browser.Gecko){bOk=false;Event.stop(a)}}return bOk},declareAjaxService:function(a,b,c){this.Services[a]=function(){aParams=Array.from(arguments);aParams.unshift(b,c);this.invokeAjaxService.apply(this,aParams)}.bind(this)},invokeAjaxService:function(){aParams=Array.from(arguments);sId=aParams.shift();sSafeLock=aParams.shift();if(aParams.length>0&&typeof aParams.first()=="function"){fCbk=aParams.shift()}else{fCbk=Prototype.emptyFunction}if(this.AjaxRequestsStack.get(sId)){MKWrapper.ajaxAbort(this.AjaxRequestsStack.get(sId));this.AjaxRequestsStack.unset(sId)}var b=JSONstring.make(aParams,true);this.displayLoader();this.AjaxRequestsStack.set(sId,new Ajax.Request(this.Misc.Urls.Ajax.service,{method:'post',parameters:{'formid':this.sFormId,'safelock':sSafeLock,'serviceid':sId,'trueargs':b},onSuccess:function(a){this.removeLoader();eval("var oJson="+a.responseText.strip()+";");this.AjaxRequestsStack.unset(sId);fCbk(oJson)}.bind(this),onFailure:function(){this.removeLoader();this.AjaxRequestsStack.unset(sId);console.log("Ajax request failed")}.bind(this)}))}});Formidable.Classes.RdtBaseClass=Base.extend({oForm:null,config:{},constructor:function(a){this.config=a;this.config.userChanged=false;this.oForm=Formidable.f(this.config.formid);this.userChanged('initEvents')},doNothing:function(){},domNode:function(){return MKWrapper.domNode(this.config.id)},userChanged:function(b){if(!this.oForm.Misc.useUserChange)return;if(b=='initEvents'){if(typeof(this.domNode())!='undefined'&&(this.domNode().nodeName.toUpperCase()==="INPUT"||this.domNode().nodeName.toUpperCase()==="TEXTAREA"||this.domNode().nodeName.toUpperCase()==="SELECT")){MKWrapper.removeEvent(this.domNode(),'change.userChanged');MKWrapper.attachEvent(this.domNode(),'change.userChanged',function(){this.userChanged(true)},this)}return}if(typeof(b)!='undefined'){if(typeof(b)=='string')b=(b.toLowerCase()==='true');else b=Boolean(b);this.config.userChanged=b;if(b){var a=this.parent();if(a)a.userChanged(b)}}return this.config.userChanged},rdt:function(a){return this.oForm.o(this.config._rdts[a])},child:function(a){return this.rdt(a)},childs:function(){if(this.config._rdts){return this.config._rdts}return{}},parent:function(){if(this.config.parent){return this.oForm.o(this.config.parent)}return false},replaceData:function(a){this.clearData();this.domNode().value=a;this.userChanged(false)},clearData:function(a){this.domNode().value="";this.userChanged(false)},clearValue:function(){this.domNode().value="";this.userChanged(false)},getValue:function(){if(this.isIterating()){oResults={};oIterator=this.oForm.o(this.config.iterator);var d=oIterator.getRows();var e=this;MKWrapper.each(d,function(a){var b=e.getIdWithoutFormIdRelativeTo(oIterator);var c=a.rdt(b);oResults[a.uid]=c.getValue()},e);return oResults}else{if(this.domNode()){var f=MKWrapper.$F(this.domNode());return f}}return""},getIdWithoutFormIdRelativeTo:function(a){sOurs=this.config.idwithoutformid;sTheirs=a.config.idwithoutformid;if(sOurs.startsWith(sTheirs)){return sOurs.substr(sTheirs.length+2)}return sOurs},setValue:function(a){this.clearValue();this.domNode().value=a;this.userChanged(false)},appendValue:function(a){sValue=this.domNode().value;if(sValue!=""){this.domNode().value+=", "+a}else{this.domNode().value=a}this.userChanged(false)},displayBlock:function(){if(oDomNode=this.domNode()){MKWrapper.setStyle(oDomNode,{'display':'block'});this.displayBlockLabel();this.displayBlockReadonly()}},displayNone:function(){if(oDomNode=this.domNode()){MKWrapper.setStyle(oDomNode,{'display':'none'});this.displayNoneLabel();this.displayNoneReadonly()}},displayDefault:function(){this.domNode().style.display="";this.displayDefaultLabel();this.displayDefaultReadonly()},displayNoneLabel:function(){if(this.getLabel()){this.getLabel().style.display="none"}},displayBlockLabel:function(){if(this.getLabel()){this.getLabel().style.display="block"}},displayDefaultLabel:function(){if(this.getLabel()){this.getLabel().style.display=""}},displayNoneReadonly:function(){if(this.getReadonly()){this.getReadonly().style.display="none"}},displayBlockReadonly:function(){if(this.getReadonly()){this.getReadonly().style.display="block"}},displayDefaultReadonly:function(){if(this.getReadonly()){this.getReadonly().style.display=""}},getLabel:function(){return MKWrapper.$(this.config.id+'_label')},getReadonly:function(){return MKWrapper.$(this.config.id+'_readonly')},replaceLabel:function(a){oLabel=this.getLabel();if(oLabel){oLabel.innerHTML=a}},visibleLabel:function(){if(this.getLabel()){this.getLabel().style.visibility="visible"}},visible:function(){this.visibleLabel();this.domNode().style.visibility="visible"},hiddenLabel:function(){if(this.getLabel()){this.getLabel().style.visibility="hidden"}},hidden:function(){this.hiddenLabel();this.domNode().style.visibility="hidden"},enable:function(){Form.enable(this.config.id)},disable:function(){Form.disable(this.config.id)},toggleDisplay:function(){if(this.domNode().style.display=="none"){this.displayBlock()}else{this.displayNone()}},toggleVisibility:function(){if(this.domNode().style.visibility=="hidden"){this.visible()}else{this.hidden()}},focus:function(){this.domNode().focus()},blur:function(){this.domNode().blur()},rebirth:function(a){},Fx:function(a){if(typeof Scriptaculous!='undefined'){var b=typeof(a);if(b.toLowerCase()=="string"){var a={"effect":a,"params":{}}}if(a["params"]["afterFinish"]&&(typeof a["params"]["afterFinish"]!="function")){a["params"]["_afterFinish"]=a["params"]["afterFinish"];a["params"]["afterFinish"]=function(){this.oForm.executeAjaxTask(a["params"]["_afterFinish"])}.bind(this)}oLabel=this.getLabel();switch(a["effect"].toLowerCase()){case"appear":{if(oLabel){new Effect.Parallel([new Effect.Appear(this.domNode()),new Effect.Appear(oLabel)],a["params"])}else{new Effect.Appear(this.domNode(),a["params"])}break}case"fade":{if(oLabel){new Effect.Parallel([new Effect.Fade(this.domNode()),new Effect.Fade(oLabel)],a["params"])}else{new Effect.Fade(this.domNode(),a["params"])}break}case"puff":{new Effect.Puff(this.domNode(),a["params"]);break}case"blinddown":{new Effect.BlindDown(this.domNode(),a["params"]);break}case"blindup":{new Effect.BlindUp(this.domNode(),a["params"]);break}case"switchoff":{new Effect.SwitchOff(this.domNode(),a["params"]);break}case"slidedown":{new Effect.SlideDown(this.domNode(),a["params"]);break}case"slideup":{new Effect.SlideUp(this.domNode(),a["params"]);break}case"dropout":{new Effect.DropOut(this.domNode(),a["params"]);break}case"shake":{new Effect.Shake(this.domNode(),a["params"]);break}case"pulsate":{new Effect.Pulsate(this.domNode(),a["params"]);break}case"squish":{new Effect.Squish(this.domNode(),a["params"]);break}case"fold":{new Effect.Fold(this.domNode(),a["params"]);break}case"grow":{new Effect.Grow(this.domNode(),a["params"]);break}case"shrink":{new Effect.Shrink(this.domNode(),a["params"]);break}case"highlight":{new Effect.Highlight(this.domNode(),a["params"]);break}case"toggleappear":{new Effect.toggle(this.domNode(),"appear",a["params"]);break}case"toggleslide":{new Effect.toggle(this.domNode(),"slide",a["params"]);break}case"toggleblind":{new Effect.toggle(this.domNode(),"blind",a["params"]);break}case"scrollto":{new Effect.ScrollTo(this.config.id);break}}}else{console.log("Scriptaculous is not loaded. Add /meta/libs = scriptaculous to your formidable")}},getMajixThrowerIdentity:function(a){return a},getParamsForMajix:function(b,c,d,e,f){fkt=function(a){sKey=a.key;sValue=a.value;if(!sKey.startsWith("majix:"))return;aParts=sKey.split(":");oObj=this.oForm.o(aParts[1]);if(oObj&&typeof(oObj[aParts[2]])=="function"){b[sKey]=oObj[aParts[2]]()}};MKWrapper.bind(fkt,this);var g=Formidable.obj2Array(b);MKWrapper.each(g,fkt);return b},getName:function(){return this.config.id.substr(this.config.formid.length+1)},repaint:function(a){if(typeof(this.domNode())=="undefined")return;oLabel=this.getLabel();if(oLabel){MKWrapper.domRemove(oLabel)}oLabel=this.getReadonly();if(oLabel){MKWrapper.domRemove(oLabel)}MKWrapper.domReplace(this.domNode(),a);this.userChanged(false)},repaintInner:function(a){if(typeof(this.domNode())=="undefined")return;MKWrapper.domInsert(this.domNode(),a);this.userChanged(false)},remove:function(){MKWrapper.domRemove(this.domNode());this.userChanged(false)},attachEvent:function(a,b){oObj=this.domNode();if(typeof(oObj)!='undefined'&&oObj!=null){MKWrapper.removeEvent(oObj,a+'.fEvent');MKWrapper.attachEvent(oObj,a+'.fEvent',b,oObj)}},addClass:function(a){this.domNode().addClassName(a)},removeClass:function(a){this.domNode().removeClassName(a)},removeAllClass:function(){this.domNode().classNames().each(function(a){this.removeClass(a)}.bind(this))},setStyle:function(a){this.domNode().setStyle(a)},isNaturalSubmitter:function(){return(this.domNode().nodeName.toUpperCase()==="SUBMIT")||(this.domNode().nodeName.toUpperCase()==="INPUT"&&(this.domNode().type.toUpperCase()==="SUBMIT"||this.domNode().type.toUpperCase()==="IMAGE"))},removeErrorStatus:function(){if(this.config.error){this.removeClass("hasError");sType=this.config.error.info.type;sTypeClass="hasError"+sType.substr(0,1).toUpperCase()+sType.substr(1,sType.length);this.removeClass(sTypeClass);if(this.getLabel()){this.getLabel().removeClassName("hasError");this.getLabel().removeClassName(sTypeClass)}$$("SPAN.rdterror").each(function(a){if(a.hasClassName(this.config.idwithoutformid)){a.style.display='none'}}.bind(this));this.config.error=false}},setErrorStatus:function(b){if(!this.config.error){this.addClass("hasError");if(!b.type){b.type="undetermined"}if(b.type){sTypeClass="hasError"+b.type.substr(0,1).toUpperCase()+b.type.substr(1,b.type);this.addClass(sTypeClass)}if(this.getLabel()){this.getLabel().addClassName("hasError");if(b.type){this.getLabel().addClassName(sTypeClass)}}$$("SPAN.rdterror").each(function(a){if(a.hasClassName(this.config.idwithoutformid)){a.style.display=''}}.bind(this));this.config.error={"info":{"type":b.type}}}},isIterating:function(){return this.config.iterating==true},triggerSubmit:function(a){if(a=="refresh"){this.oForm.submitRefresh(this)}else if(a=="test"){this.oForm.submitTest(this)}else if(a=="draft"){this.oForm.submitDraft(this)}else if(a=="clear"){this.oForm.submitClear(this)}else if(a=="search"){this.oForm.submitSearch(this)}else{this.oForm.submitFull(this)}},trigger:function(){sWhat=arguments[0];if(arguments.length>1){this.oForm.currentTriggeredArguments=Array.from(arguments).slice(1);Element.fire(this.domNode(),"formidable:"+sWhat);this.oForm.currentTriggeredArguments=false}else{this.oForm.currentTriggeredArguments=false;Element.fire(this.domNode(),"formidable:"+sWhat)}}});Formidable.Classes.CodeBehindClass=Base.extend({config:{},constructor:function(a){this.config=a;this.oForm=Formidable.f(this.config.formid);if(this.init&&typeof this.init=="function"){this.init()}}});